<?xml version="1.0"?>
<FamilyDefinition xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
	<Name>STM32MP1</Name>
	<DeviceRegex>^STM32MP1.*</DeviceRegex>
	<FamilySubdirectory>STM32MP1xxxx</FamilySubdirectory>
	<PrimaryHeaderDir>$$STM32:MP1_DIR$$\Drivers\CMSIS\Device\ST\STM32MP1xx\Include</PrimaryHeaderDir>
	<StartupFileDir>$$STM32:MP1_DIR$$\Drivers\CMSIS\Device\ST\STM32MP1xx\Source\Templates\gcc</StartupFileDir>
	<Subfamilies>
		<MCUClassifier>
			<VariableName>com.sysprogs.stm32.hal_device_family</VariableName>
			<Required>true</Required>
			<IsPrimary>true</IsPrimary>
			<AutoOptions>STM32MP157Axx;STM32MP157Cxx;STM32MP153Axx;STM32MP153Cxx;STM32MP151Axx;STM32MP151Cxx</AutoOptions>
			<UnsupportedMCUs>STM32MP1.{3}</UnsupportedMCUs>	<!-- This matches the A7 cores that are not supported by the barebone toolchain. We are only interested in the M4 cores (STM32MP1xxx_M4) -->
			<Options/>
		</MCUClassifier>
	</Subfamilies>
	<CompilationFlags>
		<PreprocessorMacros>
			<string>CORE_CM4</string>	
		</PreprocessorMacros>
		<IncludeDirectories>
			<string>.</string>
		</IncludeDirectories>
	</CompilationFlags>
	<CoreFramework>
		<CopyJobs>
			<CopyJob>
				<SourceFolder>$$STM32:MP1_DIR$$\Projects\STM32MP157C-DK2\Applications\FreeRTOS\FreeRTOS_ThreadCreation\Inc</SourceFolder>
				<TargetFolder>Templates</TargetFolder>
				<FilesToCopy>stm32mp1xx_hal_conf.h</FilesToCopy>
				<ProjectInclusionMask>-*</ProjectInclusionMask>
				<AutoIncludeMask/>
			</CopyJob>
		</CopyJobs>
	</CoreFramework>
	<AdditionalFrameworks>
	</AdditionalFrameworks>
	<SmartSamples>
	</SmartSamples>
      <AdditionalSystemVars>
        <SysVarEntry>
          <Key>com.sysprogs.stm32.hal_header_prefix</Key>
          <Value>STM32MP1xx</Value>
        </SysVarEntry>
        <SysVarEntry>
          <Key>com.sysprogs.bspoptions.stm32.hal_system_file</Key>
          <Value>STM32MP1xxxx/CMSIS_HAL/Device/ST/STM32MP1xx/Source/Templates/system_STM32MP1xx.c</Value>
        </SysVarEntry>
        <SysVarEntry>
          <Key>com.sysprogs.bspoptions.stm32.hal_config_template_file</Key>
          <Value>STM32MP1xxxx/Templates/stm32mp1xx_hal_conf.h</Value>
        </SysVarEntry>
      </AdditionalSystemVars>
</FamilyDefinition>
