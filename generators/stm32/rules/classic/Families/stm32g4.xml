<?xml version="1.0"?>
<FamilyDefinition xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
	<Name>STM32G4</Name>
	<DeviceRegex>^STM32G4.*</DeviceRegex>
	<FamilySubdirectory>STM32G4xxxx</FamilySubdirectory>
	<PrimaryHeaderDir>$$STM32:G4_DIR$$\Drivers\CMSIS\Device\ST\STM32G4xx\Include</PrimaryHeaderDir>
	<StartupFileDir>$$STM32:G4_DIR$$\Drivers\CMSIS\Device\ST\STM32G4xx\Source\Templates\gcc</StartupFileDir>
	<Subfamilies>	
		<MCUClassifier>
			<VariableName>com.sysprogs.stm32.hal_device_family</VariableName>
			<Required>true</Required>
			<IsPrimary>true</IsPrimary>
			<AutoOptions>STM32G431xx;STM32G441xx;STM32G471xx;STM32G473xx;STM32G474xx;STM32G484xx;STM32G4gbk1cb</AutoOptions> 
			<UnsupportedMCUs></UnsupportedMCUs>
			<Options>
				<!--Option>
					<Value>STM32G430xx</Value>
					<Regex>STM32F030.*</Regex>
				</Option>
				<Option>
					<Value>STM32G431xx</Value>
					<Regex>STM32F031.*</Regex>
				</Option>
				<Option>
					<Value>STM32G440xx</Value>
					<Regex>STM32F041.*</Regex>
				</Option>
								
				<Option>
					<Value>STM32G470xx</Value>
					<Regex>STM32F070.*</Regex>
				</Option>
				<Option>
					<Value>STM32G471xx</Value>
					<Regex>STM32F071.*</Regex>
				</Option>
				<Option>
					<Value>STM32G481xx</Value>
					<Regex>STM32F081.*</Regex>
				</Option-->
			</Options>
		</MCUClassifier>
		<!--MCUClassifier>
			<VariableName>com.sysprogs.stm32.legacy_device_family</VariableName>
			<Required>true</Required>
			<Options>
			</Options>
		</MCUClassifier-->
	</Subfamilies>
	<CompilationFlags>
	<PreprocessorMacros>
		<string>$$com.sysprogs.bspoptions.primary_memory$$_layout</string>		
	</PreprocessorMacros>
		<IncludeDirectories>
			<string>.</string>
		</IncludeDirectories>
	</CompilationFlags>
	<CoreFramework>
		<CopyJobs>
		</CopyJobs>
	</CoreFramework>
	<AdditionalFrameworks>
		<Framework>
			<Name>STM32G4Cube HAL</Name>
			<ID>com.sysprogs.arm.stm32.g4_hal</ID>
			<ClassID>com.sysprogs.arm.stm32.hal</ClassID>
			<IncompatibleFrameworks>
			</IncompatibleFrameworks>
			<ProjectFolderName>HAL</ProjectFolderName>
			<DefaultEnabled>true</DefaultEnabled>
			<CopyJobs>
				<CopyJob>
					<SourceFolder>$$STM32:G4_DIR$$\Drivers\STM32G4xx_HAL_Driver</SourceFolder>
					<FilesToCopy>*.c;*.h</FilesToCopy>
					<ProjectInclusionMask>-*_template.?;*</ProjectInclusionMask>
					</CopyJob>
				<CopyJob>
					<SourceFolder>$$STM32:G4_DIR$$\Drivers\CMSIS</SourceFolder>
					<FilesToCopy>-DSP\*;*.h;*.c</FilesToCopy>
					<TargetFolder>CMSIS_HAL</TargetFolder>
					<PreprocessorMacros>$$com.sysprogs.stm32.hal_device_family$$;$$com.sysprogs.bspoptions.stm32.hal_legacy$$</PreprocessorMacros>
					<ProjectInclusionMask>-RTOS2\*;-Core\Template\*;-Core_A\*;-NN\*;-*Include\STM32G4????.h*;-*system_*.c;*</ProjectInclusionMask>
					<AutoIncludeMask>-RTOS\Template\*;*.h</AutoIncludeMask>							
				</CopyJob>
			</CopyJobs>			
			<ConfigurableProperties>
				<PropertyGroups>
                    <PropertyGroup>
                        <Properties>
                            <PropertyEntry xsi:type="Boolean">
								<Name>Support legacy HAL API</Name>
                                <UniqueID>com.sysprogs.bspoptions.stm32.hal_legacy</UniqueID>
                                <ValueForTrue>USE_HAL_LEGACY</ValueForTrue>
                                <ValueForFalse></ValueForFalse>
                                <DefaultValue>true</DefaultValue>
                            </PropertyEntry> 
						</Properties>
                        <CollapsedByDefault>false</CollapsedByDefault>
                    </PropertyGroup>
                </PropertyGroups>
			</ConfigurableProperties>      
		</Framework>
		<Framework>
			<Name>STM32G4 Default System Init File</Name>
			<ID>com.sysprogs.arm.stm32.g4_systeminit</ID>
			<ClassID>com.sysprogs.arm.stm32.hal_systeminit</ClassID>
			<RequiredFrameworks>
				<string>com.sysprogs.arm.stm32.g4_hal</string>
			</RequiredFrameworks>
			<ProjectFolderName>SystemInit</ProjectFolderName>
			<DefaultEnabled>true</DefaultEnabled>
			<CopyJobs>
				<CopyJob>
					<AlreadyCopied>true</AlreadyCopied>
					<SourceFolder>$$STM32:G4_DIR$$\Drivers\CMSIS</SourceFolder>
					<TargetFolder>CMSIS_HAL</TargetFolder>
					<FilesToCopy>*system_stm*.c</FilesToCopy>
				</CopyJob>
			</CopyJobs>			
		</Framework>
	</AdditionalFrameworks>
	<SmartSamples>
	</SmartSamples>
      <AdditionalSystemVars>
        <SysVarEntry>
          <Key>com.sysprogs.stm32.hal_header_prefix</Key>
          <Value>STM32G4xx</Value>
        </SysVarEntry>
        <SysVarEntry>
          <Key>com.sysprogs.bspoptions.stm32.hal_system_file</Key>
          <Value>STM32G4xxxx/CMSIS_HAL/Device/ST/STM32G4xx/Source/Templates/system_STM32G4xx.c</Value>
        </SysVarEntry>
        <SysVarEntry>
          <Key>com.sysprogs.bspoptions.stm32.hal_config_template_file</Key>
          <Value>STM32G4xxxx/STM32G4xx_HAL_Driver/Inc/STM32G4xx_hal_conf_template.h</Value>
        </SysVarEntry>
      </AdditionalSystemVars>
</FamilyDefinition>
	