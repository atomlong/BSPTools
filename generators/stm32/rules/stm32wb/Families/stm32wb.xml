<?xml version="1.0"?>
<FamilyDefinition xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
	<Name>STM32WB</Name>
	<DeviceRegex>^STM32WB.*</DeviceRegex>
	<FamilySubdirectory>STM32WBxxxx</FamilySubdirectory>
	<PrimaryHeaderDir>$$STM32:WB_DIR$$\Drivers\CMSIS\Device\ST\STM32WBxx\Include</PrimaryHeaderDir>
	<StartupFileDir>$$STM32:WB_DIR$$\Drivers\CMSIS\Device\ST\STM32WBxx\Source\Templates\gcc</StartupFileDir>
	<Subfamilies>
		<MCUClassifier>
			<VariableName>com.sysprogs.stm32.hal_device_family</VariableName>
			<Required>true</Required>
			<IsPrimary>true</IsPrimary>
			<AutoOptions>STM32WB55xx</AutoOptions>
			<Options/>
		</MCUClassifier>
	</Subfamilies>
	<CompilationFlags>
	<PreprocessorMacros>
	</PreprocessorMacros>
	<IncludeDirectories>
		<string>.</string>
	</IncludeDirectories>
	</CompilationFlags>
	<CoreFramework>
		<CopyJobs>
			<CopyJob>
				<SourceFolder>$$STM32:WB_DIR$$\Middlewares\ST\STM32_WPAN</SourceFolder>
				<FilesToCopy>*</FilesToCopy>
				<ProjectInclusionMask>-*</ProjectInclusionMask>
				<AutoIncludeMask/>
			</CopyJob>
		</CopyJobs>
	</CoreFramework>
	<AdditionalFrameworks>
		<Framework>
			<Name>Bluetooth LE Support</Name>
			<ID>com.sysprogs.arm.stm32.ble.core</ID>
			<ProjectFolderName>BLE</ProjectFolderName>
			<DefaultEnabled>false</DefaultEnabled>
			<RequiredFrameworks>
				<string>com.sysprogs.arm.stm32.hal</string>
			</RequiredFrameworks>
			<CopyJobs>
				<CopyJob>
					<SourceFolder>$$STM32:WB_DIR$$\Middlewares\ST\STM32_WPAN\ble\core</SourceFolder>
					<TargetFolder>STM32_WPAN/ble/core</TargetFolder>
					<AlreadyCopied>true</AlreadyCopied>
					<FilesToCopy>*</FilesToCopy>
					<ProjectInclusionMask>-*template_*;*.c;*.h</ProjectInclusionMask>
					<AdditionalIncludeDirs>$$SYS:BSP_ROOT$$/STM32WBxxxx/STM32_WPAN/ble</AdditionalIncludeDirs>
					<SmartFileConditions>
						<!-- '-' in front of the name means 'disabled by default' -->
						<string>-Blood Pressure Service|.*\\bls\.(h|c)</string>
						<string>-Cable Replacement Service (ST)|.*\\crs_stm\.(h|c)</string>
						<string>-Device Information Service|.*\\dis\.(h|c)</string>
						<string>-End Device Service (ST)|.*\\eds_stm\.(h|c)</string>
						<string>-Human Interface Device Service|.*\\hids\.(h|c)</string>
						<string>-Heart Rate Service|.*\\hrs\.(h|c)</string>
						<string>-Health Thermometer Service|.*\\hts\.(h|c)</string>
						<string>-Immediate Alert Service|.*\\ias\.(h|c)</string>
						<string>-Link Loss Service|.*\\lls\.(h|c)</string>
						<string>-Mesh|.*\\mesh\.(h|c)</string>
						<string>-OTA Service (ST)|.*\\otas_stm\.(h|c)</string>
						<string>-Peer-to-Peer Service (ST)|.*\\p2p_stm\.(h|c)</string>
						<string>-TX Power Service|.*\\tps\.(h|c)</string>
					</SmartFileConditions>
				</CopyJob>
			</CopyJobs>
			<ConfigurableProperties>
				<PropertyGroups>
				  <PropertyGroup>
				    <Name>Bluetooth LE Services</Name>
					<UniqueID>com.sysprogs.bspoptions.stm32.ble.</UniqueID>
					<CollapsedByDefault>false</CollapsedByDefault>
				  </PropertyGroup>
				</PropertyGroups>
			</ConfigurableProperties>			
		</Framework>
		<Framework>
			<Name>BLE Thread Interface</Name>
			<ID>com.sysprogs.arm.stm32.ble.thread</ID>
			<ProjectFolderName>BLE Thread</ProjectFolderName>
			<DefaultEnabled>false</DefaultEnabled>
			<RequiredFrameworks>
				<string>com.sysprogs.arm.stm32.hal</string>
				<string>com.sysprogs.arm.stm32.ble.core</string>
			</RequiredFrameworks>
			<CopyJobs>
				<CopyJob>
					<SourceFolder>$$STM32:WB_DIR$$\Middlewares\ST\STM32_WPAN\interface\patterns\ble_thread</SourceFolder>
					<TargetFolder>STM32_WPAN/interface/patterns/ble_thread</TargetFolder>
					<AlreadyCopied>true</AlreadyCopied>
					<FilesToCopy>*</FilesToCopy>
					<ProjectInclusionMask>-*template_*;*.c;*.h</ProjectInclusionMask>
					<AdditionalIncludeDirs>$$SYS:BSP_ROOT$$/STM32WBxxxx/STM32_WPAN</AdditionalIncludeDirs>
					<SmartFileConditions>
						<!-- '-' in front of the name means 'disabled by default' -->
						<string>-Virtual COM Port Support|vcp\\.*</string>
					</SmartFileConditions>
				</CopyJob>
			</CopyJobs>
			<ConfigurableProperties>
				<PropertyGroups>
				  <PropertyGroup>
				    <Name>Bluetooth LE Thread Interface</Name>
					<UniqueID>com.sysprogs.bspoptions.stm32.thread_iface.</UniqueID>
					<CollapsedByDefault>false</CollapsedByDefault>
				  </PropertyGroup>
				</PropertyGroups>
			</ConfigurableProperties>			
		</Framework>
		<Framework>
			<Name>Development Board Support</Name>
			<ID>com.sysprogs.arm.stm32.stm32bsp</ID>
			<ProjectFolderName>Board</ProjectFolderName>
			<DefaultEnabled>false</DefaultEnabled>
			<RequiredFrameworks>
				<string>com.sysprogs.arm.stm32.hal</string>
			</RequiredFrameworks>
			<CopyJobs>
				<CopyJob>
					<SourceFolder>$$STM32:WB_DIR$$\Drivers\BSP</SourceFolder>
					<TargetFolder>BSP</TargetFolder>
					<FilesToCopy>*</FilesToCopy>
					<ProjectInclusionMask>-*template_*;*.c;*.h</ProjectInclusionMask>
					<SmartFileConditions>
						<!-- '-' in front of the name means 'disabled by default' -->
						<string>Board Type|
=>None;
P-NUCLEO-WB55.Nucleo\\.*=>NUCLEO-WB55[nucleo];
P-NUCLEO-WB55.USBDongle\\.*=>NUCLEO-WB55 (USB Dongle)[dongle]
						</string>
						<string>-Adafruit Shield Support|Adafruit_Shield\\.*</string>
						<string>-External Components|Components\\.*</string>
					</SmartFileConditions>
				</CopyJob>
			</CopyJobs>
			<ConfigurableProperties>
				<PropertyGroups>
				  <PropertyGroup>
				    <Name>Development Board</Name>
					<UniqueID>com.sysprogs.bspoptions.stm32.board.</UniqueID>
					<CollapsedByDefault>false</CollapsedByDefault>
				  </PropertyGroup>
				</PropertyGroups>
			</ConfigurableProperties>			
		</Framework>
		<Framework>
			<Name>Bluetooth LE Utilities</Name>
			<ID>com.sysprogs.arm.stm32.ble_utilities</ID>
			<ProjectFolderName>BLE Utilities</ProjectFolderName>
			<DefaultEnabled>false</DefaultEnabled>
			<RequiredFrameworks>
				<string>com.sysprogs.arm.stm32.hal</string>
			</RequiredFrameworks>
			<CopyJobs>
				<CopyJob>
					<SourceFolder>$$STM32:WB_DIR$$\Middlewares\ST\STM32_WPAN\utilities</SourceFolder>
					<TargetFolder>STM32_WPAN/utilities</TargetFolder>
					<AlreadyCopied>true</AlreadyCopied>
					<FilesToCopy>*</FilesToCopy>
				</CopyJob>
			</CopyJobs>
		</Framework>
		<Framework>
			<Name>OpenThread IoT Library</Name>
			<ID>com.sysprogs.arm.stm32.openthread</ID>
			<ProjectFolderName>OpenThread</ProjectFolderName>
			<DefaultEnabled>false</DefaultEnabled>
			<RequiredFrameworks>
				<string>com.sysprogs.arm.stm32.hal</string>
			</RequiredFrameworks>
			<CopyJobs>
				<CopyJob>
					<PreprocessorMacros>OPENTHREAD_CONFIG_FILE=$$com.sysprogs.bspoptions.stm32.openthread_config_file$$</PreprocessorMacros>				
					<SourceFolder>$$STM32:WB_DIR$$\Middlewares\ST\STM32_WPAN\thread</SourceFolder>
					<TargetFolder>STM32_WPAN/thread</TargetFolder>
					<AlreadyCopied>true</AlreadyCopied>
					<FilesToCopy>*</FilesToCopy>
				</CopyJob>
			</CopyJobs>
			<ConfigurableProperties>
				<PropertyGroups>
				  <PropertyGroup>
					<CollapsedByDefault>false</CollapsedByDefault>
					<Properties>
					  <PropertyEntry xsi:type="String">
						<Name>OpenThread Configuration File Name</Name>
						<UniqueID>com.sysprogs.bspoptions.stm32.openthread_config_file</UniqueID>
						<DefaultValue>&lt;openthread_api_config_ftd.h&gt;</DefaultValue>
					  </PropertyEntry>
					</Properties>					
				  </PropertyGroup>
				</PropertyGroups>
			</ConfigurableProperties>	
			</Framework>
	</AdditionalFrameworks>
	<SmartSamples>
		<SmartSample>
			<SourceFolder>$$STM32:WB_DIR$$\Projects\P-NUCLEO-WB55.Nucleo\Applications\BLE\BLE_HeartRate</SourceFolder>
			<DestinationFolder>Samples/Nucleo/BLE_HeartRate</DestinationFolder>
			<CopyFilters>-Binary\*;-EWARM\*;-MDK-ARM\*;-SW4STM32\*;*</CopyFilters>
			<Patches>
				<Patch xsi:type="ReplaceLine">
					<FilePath>Core\Inc\app_conf.h</FilePath>
					<OldLine>#define CFG_DEBUGGER_SUPPORTED    0</OldLine>
					<NewLine>#define CFG_DEBUGGER_SUPPORTED    1</NewLine>
				</Patch>					
			</Patches>
			<EmbeddedSample>
				<Name>Heart Rate Service Demo</Name>
				<Description>A basic HRS service demo for the STM32Nucleo board</Description>
				<DoNotUpgradeCToCpp>true</DoNotUpgradeCToCpp>
				<AdditionalIncludeDirectories>
					<string>Core/Inc</string>
					<string>STM32_WPAN/App</string>
				</AdditionalIncludeDirectories>
				<RequiredFrameworks>
					<string>com.sysprogs.arm.stm32.ble.core</string>
					<string>com.sysprogs.arm.stm32.ble.thread</string>
					<string>com.sysprogs.arm.stm32.stm32bsp</string>
					<string>com.sysprogs.arm.stm32.ble_utilities</string>
					<string>com.sysprogs.arm.stm32.openthread</string>
					<string>com.sysprogs.arm.stm32.hal</string>
					<string>com.sysprogs.arm.stm32.ll</string>
				</RequiredFrameworks>
				<DefaultConfiguration>
					<Entries>
					  <KeyValue>
						<Key>com.sysprogs.bspoptions.stm32.ble.Blood_Pressure_Service</Key>
					  </KeyValue>
					  <KeyValue>
						<Key>com.sysprogs.bspoptions.stm32.ble.Cable_Replacement_Service_(ST)</Key>
					  </KeyValue>
					  <KeyValue>
						<Key>com.sysprogs.bspoptions.stm32.ble.Device_Information_Service</Key>
						<Value>1</Value>
					  </KeyValue>
					  <KeyValue>
						<Key>com.sysprogs.bspoptions.stm32.ble.End_Device_Service_(ST)</Key>
					  </KeyValue>
					  <KeyValue>
						<Key>com.sysprogs.bspoptions.stm32.ble.Human_Interface_Device_Service</Key>
					  </KeyValue>
					  <KeyValue>
						<Key>com.sysprogs.bspoptions.stm32.ble.Heart_Rate_Service</Key>
						<Value>1</Value>
					  </KeyValue>
					  <KeyValue>
						<Key>com.sysprogs.bspoptions.stm32.ble.Health_Thermometer_Service</Key>
					  </KeyValue>
					  <KeyValue>
						<Key>com.sysprogs.bspoptions.stm32.ble.Immediate_Alert_Service</Key>
					  </KeyValue>
					  <KeyValue>
						<Key>com.sysprogs.bspoptions.stm32.ble.Link_Loss_Service</Key>
					  </KeyValue>
					  <KeyValue>
						<Key>com.sysprogs.bspoptions.stm32.ble.Mesh</Key>
					  </KeyValue>
					  <KeyValue>
						<Key>com.sysprogs.bspoptions.stm32.ble.OTA_Service_(ST)</Key>
					  </KeyValue>
					  <KeyValue>
						<Key>com.sysprogs.bspoptions.stm32.ble.Peer-to-Peer_Service_(ST)</Key>
					  </KeyValue>
					  <KeyValue>
						<Key>com.sysprogs.bspoptions.stm32.ble.TX_Power_Service</Key>
					  </KeyValue>
					  <KeyValue>
						<Key>com.sysprogs.bspoptions.stm32.thread_iface.Virtual_COM_Port_Support</Key>
					  </KeyValue>
					  <KeyValue>
						<Key>com.sysprogs.bspoptions.stm32.board.Board_Type</Key>
						<Value>NUCLEO-WB55</Value>
					  </KeyValue>
					  <KeyValue>
						<Key>com.sysprogs.bspoptions.stm32.board.Adafruit_Shield_Support</Key>
					  </KeyValue>
					  <KeyValue>
						<Key>com.sysprogs.bspoptions.stm32.board.External_Components</Key>
					  </KeyValue>
					  <KeyValue>
						<Key>com.sysprogs.bspoptions.stm32.openthread_config_file</Key>
						<Value>&lt;openthread_api_config_ftd.h&gt;</Value>
					  </KeyValue>
					  <KeyValue>
						<Key>com.sysprogs.bspoptions.stm32.ll_driver</Key>
						<Value />
					  </KeyValue>
					</Entries>
				</DefaultConfiguration>
			</EmbeddedSample>
		</SmartSample>
	</SmartSamples>
      <AdditionalSystemVars>
        <SysVarEntry>
          <Key>com.sysprogs.stm32.hal_header_prefix</Key>
          <Value>stm32wbxx</Value>
        </SysVarEntry>
        <SysVarEntry>
          <Key>com.sysprogs.bspoptions.stm32.hal_system_file</Key>
          <Value>STM32WBxxxx/CMSIS_HAL/Device/ST/STM32WBxx/Source/Templates/system_stm32wbxx.c</Value>
        </SysVarEntry>
        <SysVarEntry>
          <Key>com.sysprogs.bspoptions.stm32.hal_config_template_file</Key>
          <Value>STM32WBxxxx/STM32WBxx_HAL_Driver/Inc/stm32wbxx_hal_conf_template.h</Value>
        </SysVarEntry>
      </AdditionalSystemVars>
</FamilyDefinition>
